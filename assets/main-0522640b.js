class O{constructor(o){this.properties=o??[]}get(o){const n=this.properties.filter(t=>t.name===o).map(t=>t.value);if(n.length>1)throw new Error('Expected only one property to be named "'+o+'"');if(n.length!==0)return n[0]}getString(o){return this.getByType(o,"string")}getNumber(o){return this.getByType(o,"number")}getBoolean(o){return this.getByType(o,"boolean")}getByType(o,n){const t=this.get(o);if(t!==void 0){if(n!=="json"&&typeof t!==n)throw new Error('Expected property "'+o+'" to have type "'+n+'"');return t}}mustGetString(o){return this.mustGetByType(o,"string")}mustGetNumber(o){return this.mustGetByType(o,"number")}mustGetBoolean(o){return this.mustGetByType(o,"boolean")}mustGetByType(o,n){const t=this.get(o);if(t===void 0)throw new Error('Property "'+o+'" is missing');if(n!=="json"&&typeof t!==n)throw new Error('Expected property "'+o+'" to have type "'+n+'"');return t}getType(o){const n=this.properties.filter(t=>t.name===o).map(t=>t.type);if(n.length>1)throw new Error('Expected only one property to be named "'+o+'"');if(n.length!==0)return n[0]}}const K="https://unpkg.com/@workadventure/scripting-api-extra@1.4.6/dist";class de{constructor(o){this.name=o.name,this.x=o.x,this.y=o.y,this.properties=new O(o.properties)}get isReadable(){const o=this.properties.getString("readableBy");return o?WA.player.tags.includes(o):!0}get isWritable(){const o=this.properties.getString("writableBy");return o?WA.player.tags.includes(o):!0}}function Z(e){const o=e?"#"+e.join():"";WA.nav.openCoWebSite(K+"/configuration.html"+o)}async function he(e,o){const n=await WA.room.getTiledMap(),t=new Map;return re(n.layers,t,e,o),t}function re(e,o,n,t){for(const a of e)if(a.type==="objectgroup"){for(const r of a.objects)if(r.type==="variable"||r.class==="variable"){if(n&&a.name!==n||t&&!t.includes(r.name))continue;o.set(r.name,new de(r))}}else a.type==="group"&&re(a.layers,o,n,t)}let q;async function G(){return q===void 0&&(q=be()),q}async function be(){return me(await WA.room.getTiledMap())}function me(e){const o=new Map;return se(e.layers,"",o),o}function se(e,o,n){for(const t of e)t.type==="group"?se(t.layers,o+t.name+"/",n):(t.name=o+t.name,n.set(t.name,t))}async function ye(){const e=await G(),o=[];for(const n of e.values())if(n.type==="objectgroup")for(const t of n.objects)(t.type==="area"||t.class==="area")&&o.push(t);return o}function fe(e){let o=1/0,n=1/0,t=0,a=0;const r=e.data;if(typeof r=="string")throw new Error("Unsupported tile layer data stored as string instead of CSV");for(let s=0;s<e.height;s++)for(let u=0;u<e.width;u++)r[u+s*e.width]!==0&&(o=Math.min(o,u),a=Math.max(a,u),n=Math.min(n,s),t=Math.max(t,s));return{top:n,left:o,right:a+1,bottom:t+1}}function ie(e){let o=1/0,n=1/0,t=0,a=0;for(const r of e){const s=fe(r);s.left<o&&(o=s.left),s.top<n&&(n=s.top),s.right>a&&(a=s.right),s.bottom>t&&(t=s.bottom)}return{top:n,left:o,right:a,bottom:t}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var Ae=Object.prototype.toString,z=Array.isArray||function(o){return Ae.call(o)==="[object Array]"};function Y(e){return typeof e=="function"}function ge(e){return z(e)?"array":typeof e}function H(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function J(e,o){return e!=null&&typeof e=="object"&&o in e}function We(e,o){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(o)}var we=RegExp.prototype.test;function ve(e,o){return we.call(e,o)}var Se=/\S/;function Pe(e){return!ve(Se,e)}var Ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Le(e){return String(e).replace(/[&<>"'`=\/]/g,function(n){return Ee[n]})}var Me=/\s*/,Ce=/\s+/,Q=/\s*=/,ke=/\s*\}/,xe=/#|\^|\/|>|\{|&|=|!/;function ze(e,o){if(!e)return[];var n=!1,t=[],a=[],r=[],s=!1,u=!1,l="",f=0;function g(){if(s&&!u)for(;r.length;)delete a[r.pop()];else r=[];s=!1,u=!1}var S,E,U;function T(M){if(typeof M=="string"&&(M=M.split(Ce,2)),!z(M)||M.length!==2)throw new Error("Invalid tags: "+M);S=new RegExp(H(M[0])+"\\s*"),E=new RegExp("\\s*"+H(M[1])),U=new RegExp("\\s*"+H("}"+M[1]))}T(o||v.tags);for(var h=new V(e),L,w,P,I,D,C;!h.eos();){if(L=h.pos,P=h.scanUntil(S),P)for(var N=0,le=P.length;N<le;++N)I=P.charAt(N),Pe(I)?(r.push(a.length),l+=I):(u=!0,n=!0,l+=" "),a.push(["text",I,L,L+1]),L+=1,I===`
`&&(g(),l="",f=0,n=!1);if(!h.scan(S))break;if(s=!0,w=h.scan(xe)||"name",h.scan(Me),w==="="?(P=h.scanUntil(Q),h.scan(Q),h.scanUntil(E)):w==="{"?(P=h.scanUntil(U),h.scan(ke),h.scanUntil(E),w="&"):P=h.scanUntil(E),!h.scan(E))throw new Error("Unclosed tag at "+h.pos);if(w==">"?D=[w,P,L,h.pos,l,f,n]:D=[w,P,L,h.pos],f++,a.push(D),w==="#"||w==="^")t.push(D);else if(w==="/"){if(C=t.pop(),!C)throw new Error('Unopened section "'+P+'" at '+L);if(C[1]!==P)throw new Error('Unclosed section "'+C[1]+'" at '+L)}else w==="name"||w==="{"||w==="&"?u=!0:w==="="&&T(P)}if(g(),C=t.pop(),C)throw new Error('Unclosed section "'+C[1]+'" at '+h.pos);return Ie(Te(a))}function Te(e){for(var o=[],n,t,a=0,r=e.length;a<r;++a)n=e[a],n&&(n[0]==="text"&&t&&t[0]==="text"?(t[1]+=n[1],t[3]=n[3]):(o.push(n),t=n));return o}function Ie(e){for(var o=[],n=o,t=[],a,r,s=0,u=e.length;s<u;++s)switch(a=e[s],a[0]){case"#":case"^":n.push(a),t.push(a),n=a[4]=[];break;case"/":r=t.pop(),r[5]=a[2],n=t.length>0?t[t.length-1][4]:o;break;default:n.push(a)}return o}function V(e){this.string=e,this.tail=e,this.pos=0}V.prototype.eos=function(){return this.tail===""};V.prototype.scan=function(o){var n=this.tail.match(o);if(!n||n.index!==0)return"";var t=n[0];return this.tail=this.tail.substring(t.length),this.pos+=t.length,t};V.prototype.scanUntil=function(o){var n=this.tail.search(o),t;switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t};function x(e,o){this.view=e,this.cache={".":this.view},this.parent=o}x.prototype.push=function(o){return new x(o,this)};x.prototype.lookup=function(o){var n=this.cache,t;if(n.hasOwnProperty(o))t=n[o];else{for(var a=this,r,s,u,l=!1;a;){if(o.indexOf(".")>0)for(r=a.view,s=o.split("."),u=0;r!=null&&u<s.length;)u===s.length-1&&(l=J(r,s[u])||We(r,s[u])),r=r[s[u++]];else r=a.view[o],l=J(a.view,o);if(l){t=r;break}a=a.parent}n[o]=t}return Y(t)&&(t=t.call(this.view)),t};function W(){this.templateCache={_cache:{},set:function(o,n){this._cache[o]=n},get:function(o){return this._cache[o]},clear:function(){this._cache={}}}}W.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};W.prototype.parse=function(o,n){var t=this.templateCache,a=o+":"+(n||v.tags).join(":"),r=typeof t<"u",s=r?t.get(a):void 0;return s==null&&(s=ze(o,n),r&&t.set(a,s)),s};W.prototype.render=function(o,n,t,a){var r=this.getConfigTags(a),s=this.parse(o,r),u=n instanceof x?n:new x(n,void 0);return this.renderTokens(s,u,t,o,a)};W.prototype.renderTokens=function(o,n,t,a,r){for(var s="",u,l,f,g=0,S=o.length;g<S;++g)f=void 0,u=o[g],l=u[0],l==="#"?f=this.renderSection(u,n,t,a,r):l==="^"?f=this.renderInverted(u,n,t,a,r):l===">"?f=this.renderPartial(u,n,t,r):l==="&"?f=this.unescapedValue(u,n):l==="name"?f=this.escapedValue(u,n,r):l==="text"&&(f=this.rawValue(u)),f!==void 0&&(s+=f);return s};W.prototype.renderSection=function(o,n,t,a,r){var s=this,u="",l=n.lookup(o[1]);function f(E){return s.render(E,n,t,r)}if(l){if(z(l))for(var g=0,S=l.length;g<S;++g)u+=this.renderTokens(o[4],n.push(l[g]),t,a,r);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")u+=this.renderTokens(o[4],n.push(l),t,a,r);else if(Y(l)){if(typeof a!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,a.slice(o[3],o[5]),f),l!=null&&(u+=l)}else u+=this.renderTokens(o[4],n,t,a,r);return u}};W.prototype.renderInverted=function(o,n,t,a,r){var s=n.lookup(o[1]);if(!s||z(s)&&s.length===0)return this.renderTokens(o[4],n,t,a,r)};W.prototype.indentPartial=function(o,n,t){for(var a=n.replace(/[^ \t]/g,""),r=o.split(`
`),s=0;s<r.length;s++)r[s].length&&(s>0||!t)&&(r[s]=a+r[s]);return r.join(`
`)};W.prototype.renderPartial=function(o,n,t,a){if(t){var r=this.getConfigTags(a),s=Y(t)?t(o[1]):t[o[1]];if(s!=null){var u=o[6],l=o[5],f=o[4],g=s;l==0&&f&&(g=this.indentPartial(s,f,u));var S=this.parse(g,r);return this.renderTokens(S,n,t,g,a)}}};W.prototype.unescapedValue=function(o,n){var t=n.lookup(o[1]);if(t!=null)return t};W.prototype.escapedValue=function(o,n,t){var a=this.getConfigEscape(t)||v.escape,r=n.lookup(o[1]);if(r!=null)return typeof r=="number"&&a===v.escape?String(r):a(r)};W.prototype.rawValue=function(o){return o[1]};W.prototype.getConfigTags=function(o){return z(o)?o:o&&typeof o=="object"?o.tags:void 0};W.prototype.getConfigEscape=function(o){if(o&&typeof o=="object"&&!z(o))return o.escape};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){j.templateCache=e},get templateCache(){return j.templateCache}},j=new W;v.clearCache=function(){return j.clearCache()};v.parse=function(o,n){return j.parse(o,n)};v.render=function(o,n,t,a){if(typeof o!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+ge(o)+'" was given as the first argument for mustache#render(template, view, partials)');return j.render(o,n,t,a)};v.escape=Le;v.Scanner=V;v.Context=x;v.Writer=W;class ue{constructor(o,n){this.template=o,this.state=n,this.ast=v.parse(o)}getValue(){return this.value===void 0&&(this.value=v.render(this.template,this.state)),this.value}onChange(o){const n=[];for(const t of this.getUsedVariables().values())n.push(this.state.onVariableChange(t).subscribe(()=>{const a=v.render(this.template,this.state);a!==this.value&&(this.value=a,o(this.value))}));return{unsubscribe:()=>{for(const t of n)t.unsubscribe()}}}isPureString(){return this.ast.length===0||this.ast.length===1&&this.ast[0][0]==="text"}getUsedVariables(){const o=new Set;return this.recursiveGetUsedVariables(this.ast,o),o}recursiveGetUsedVariables(o,n){for(const t of o){const a=t[0],r=t[1],s=t[4];["name","&","#","^"].includes(a)&&n.add(r),s!==void 0&&typeof s!="string"&&this.recursiveGetUsedVariables(s,n)}}}async function Re(){var e;const o=await ye();for(const n of o){const t=(e=n.properties)!==null&&e!==void 0?e:[];for(const a of t){if(a.type==="int"||a.type==="bool"||a.type==="object"||typeof a.value!="string")continue;const r=new ue(a.value,WA.state);if(r.isPureString())continue;const s=r.getValue();await ee(n.name,a.name,s),r.onChange(async u=>{await ee(n.name,a.name,u)})}}}async function Be(){var e;const o=await G();for(const[n,t]of o.entries())if(t.type!=="objectgroup"){const a=(e=t.properties)!==null&&e!==void 0?e:[];for(const r of a){if(r.type==="int"||r.type==="bool"||r.type==="object"||typeof r.value!="string")continue;const s=new ue(r.value,WA.state);if(s.isPureString())continue;const u=s.getValue();oe(n,r.name,u),s.onChange(l=>{oe(n,r.name,l)})}}}async function ee(e,o,n){console.log(e),(await WA.room.area.get(e)).setProperty(o,n)}function oe(e,o,n){WA.room.setProperty(e,o,n),o==="visible"&&(n?WA.room.showLayer(e):WA.room.hideLayer(e))}let $,X=0,F=0;function ne(e){if(WA.state[e.name]){let o=e.properties.mustGetString("openLayer");for(const n of o.split(`
`))WA.room.showLayer(n);o=e.properties.mustGetString("closeLayer");for(const n of o.split(`
`))WA.room.hideLayer(n)}else{let o=e.properties.mustGetString("openLayer");for(const n of o.split(`
`))WA.room.hideLayer(n);o=e.properties.mustGetString("closeLayer");for(const n of o.split(`
`))WA.room.showLayer(n)}}function Oe(e){const o=e.properties.getString("openSound"),n=e.properties.getNumber("soundRadius");let t=1;if(n){const a=ce(e.properties.mustGetString("openLayer").split(`
`));if(a>n)return;t=1-a/n}o&&WA.sound.loadSound(o).play({volume:t})}function je(e){const o=e.properties.getString("closeSound"),n=e.properties.getNumber("soundRadius");let t=1;if(n){const a=ce(e.properties.mustGetString("closeLayer").split(`
`));if(a>n)return;t=1-a/n}o&&WA.sound.loadSound(o).play({volume:t})}function pe(e){return e.map(o=>$.get(o)).filter(o=>(o==null?void 0:o.type)==="tilelayer")}function ce(e){const o=pe(e),n=ie(o),t=((n.right-n.left)/2+n.left)*32,a=((n.bottom-n.top)/2+n.top)*32;return Math.sqrt(Math.pow(X-t,2)+Math.pow(F-a,2))}function Ge(e){WA.state.onVariableChange(e.name).subscribe(()=>{WA.state[e.name]?Oe(e):je(e),ne(e)}),ne(e)}function Ve(e,o,n,t){const a=e.name;let r,s,u=!1;const l=n.getString("tag");let f=!0;l&&!WA.player.tags.includes(l)&&(f=!1);const g=!!l;function S(){var h;r&&r.remove(),r=WA.ui.displayActionMessage({message:(h=n.getString("closeTriggerMessage"))!==null&&h!==void 0?h:"Press SPACE to close the door",callback:()=>{WA.state[o.name]=!1,E()}})}function E(){var h;r&&r.remove(),r=WA.ui.displayActionMessage({message:(h=n.getString("openTriggerMessage"))!==null&&h!==void 0?h:"Press SPACE to open the door",callback:()=>{WA.state[o.name]=!0,S()}})}function U(h){const L=ie(pe(o.properties.mustGetString("closeLayer").split(`
`)));s=WA.room.website.create({name:"doorKeypad"+h,url:t+"/keypad.html#"+encodeURIComponent(h),position:{x:L.right*32,y:L.top*32,width:32*3,height:32*4},allowApi:!0})}function T(){s&&(WA.room.website.delete(s.name),s=void 0)}WA.room.onEnterLayer(a).subscribe(()=>{if(u=!0,n.getBoolean("autoOpen")&&f){WA.state[o.name]=!0;return}if(!WA.state[o.name]&&(g&&!f||!g)&&(n.getString("code")||n.getString("codeVariable"))){U(a);return}f&&(WA.state[o.name]?S():E())}),WA.room.onLeaveLayer(a).subscribe(()=>{u=!1,n.getBoolean("autoClose")&&(WA.state[o.name]=!1),r&&r.remove(),T()}),WA.state.onVariableChange(o.name).subscribe(()=>{u&&(!n.getBoolean("autoClose")&&WA.state[o.name]===!0&&S(),s&&WA.state[o.name]===!0&&T(),!n.getBoolean("autoOpen")&&WA.state[o.name]===!1&&E())})}function Ue(e){const o=e.properties.mustGetString("bellSound"),n=e.properties.getNumber("soundRadius");let t=1;if(n){const a=Math.sqrt(Math.pow(e.x-X,2)+Math.pow(e.y-F,2));if(a>n)return;t=1-a/n}WA.sound.loadSound(o).play({volume:t})}function De(e){WA.state[e.name]===void 0&&(WA.state[e.name]=0),WA.state.onVariableChange(e.name).subscribe(()=>{WA.state[e.name]&&Ue(e)})}function _e(e,o,n){let t;const a=o.getString("bellPopup");WA.room.onEnterLayer(n).subscribe(()=>{var r;a?t=WA.ui.openPopup(a,"",[{label:(r=o.getString("bellButtonText"))!==null&&r!==void 0?r:"Ring",callback:()=>{WA.state[e]=WA.state[e]+1}}]):WA.state[e]=WA.state[e]+1}),WA.room.onLeaveLayer(n).subscribe(()=>{t&&(t.close(),t=void 0)})}async function Ne(e){e=e??K;const o=await he();$=await G();for(const n of o.values())n.properties.get("door")&&Ge(n),n.properties.get("bell")&&De(n);for(const n of $.values()){const t=new O(n.properties),a=t.getString("doorVariable");if(a&&n.type==="tilelayer"){const s=o.get(a);if(s===void 0)throw new Error('Cannot find variable "'+a+'" referred in the "doorVariable" property of layer "'+n.name+'"');Ve(n,s,t,e)}const r=t.getString("bellVariable");r&&_e(r,t,n.name)}WA.player.onPlayerMove(n=>{X=n.x,F=n.y})}function qe(e,o){const n=e.getString("bindVariable");if(n){const t=e.get("enterValue"),a=e.get("leaveValue"),r=e.getString("triggerMessage"),s=e.getString("tag");He(n,o,t,a,r,s)}}function He(e,o,n,t,a,r){r&&!WA.player.tags.includes(r)||(n!==void 0&&WA.room.onEnterLayer(o).subscribe(()=>{a||(WA.state[e]=n)}),t!==void 0&&WA.room.onLeaveLayer(o).subscribe(()=>{WA.state[e]=t}))}async function $e(){const e=await G();for(const o of e.values()){const n=new O(o.properties);qe(n,o.name)}}let te;async function Ke(e){const o=await WA.room.getTiledMap();e=e??K,te=await G();const n=o.layers.find(t=>t.name==="configuration");if(n){const a=new O(n.properties).getString("tag");(!a||WA.player.tags.includes(a))&&WA.ui.registerMenuCommand("Configure the room",()=>{WA.nav.openCoWebSite(e+"/configuration.html",!0)});for(const r of te.values()){const s=new O(r.properties),u=s.getString("openConfig");u&&r.type==="tilelayer"&&Ye(u.split(","),r.name,s)}}}function Ye(e,o,n){let t;const a=n.getString("openConfigAdminTag");let r=!0;a&&!WA.player.tags.includes(a)&&(r=!1);function s(){var l;t&&t.remove(),t=WA.ui.displayActionMessage({message:(l=n.getString("openConfigTriggerMessage"))!==null&&l!==void 0?l:"Press SPACE or touch here to configure",callback:()=>Z(e)})}function u(){WA.nav.closeCoWebSite()}WA.room.onEnterLayer(o).subscribe(()=>{const l=n.getString("openConfigTrigger");r&&(l&&l==="onaction"?s():Z(e))}),WA.room.onLeaveLayer(o).subscribe(()=>{t&&t.remove(),u()})}function Xe(){return WA.onInit().then(()=>{Ne().catch(e=>console.error(e)),$e().catch(e=>console.error(e)),Ke().catch(e=>console.error(e)),Be().catch(e=>console.error(e)),Re().catch(e=>console.error(e))}).catch(e=>console.error(e))}console.log("Script started successfully");let d,_,y,m,p=0,c=0,k,R=0,B=0;const Fe=/Mobi|Android|iPhone/i.test(navigator.userAgent);WA.onInit().then(()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags),WA.room.hideLayer("monsterlab"),WA.room.area.onEnter("sfire").subscribe(()=>{m=WA.sound.loadSound("sound/fire2.wav").play(i)}),WA.room.area.onLeave("sfire").subscribe(()=>{ae()}),WA.room.area.onEnter("npcpiratezone").subscribe(()=>{d=WA.ui.openPopup("npcpiratepopup","CAPTAIN BOTTLE-TOP: Welcome on board, mate! Our spaceship crashed on this Unknown Planet, and we must find our way back home! I learned that we must solve the riddles to defeat the Force of the Unknown Planet and get our spaceship free to go back home!Lets do this!",[]);var e=WA.sound.loadSound("sound/npc/pirate.wav");e.play(i)}),WA.room.area.onLeave("npcpiratezone").subscribe(b),WA.room.area.onEnter("npcrobotzone").subscribe(()=>{d=WA.ui.openPopup("npcrobotpopup","IRON SAMSON: Excellent! Did you complete the task? I don't know, and I don't care. Now, enter your answers into the terminal, and I'll see if you did the task right. Hope you remember how to use a keyboard, ha-ha-ha!",[]);var e=WA.sound.loadSound("sound/npc/robot.mp3");e.play(i)}),WA.room.area.onLeave("npcrobotzone").subscribe(b),WA.room.area.onEnter("npcadminzone").subscribe(()=>{d=WA.ui.openPopup("npcadmin1popup","BoJack: Did you notice the violation? Lets ban him?",[]),_=WA.ui.openPopup("npcadmin2popup","Zaragossa: I'll keep an eye on him from an ambush...",[]);var e=WA.sound.loadSound("sound/npc/horse.mp3");e.play(i);var o=WA.sound.loadSound("sound/npc/mouse.mp3");o.play(i)}),WA.room.area.onLeave("npcadminzone").subscribe(b),WA.room.area.onLeave("npcadminzone").subscribe(Ze),WA.room.area.onEnter("npcpidginzone").subscribe(()=>{d=WA.ui.openPopup("npcpidginpopup","FLIPPER: Hello! I find myself in a strange place surrounded by ancient Egyptian pyramids, and I feel that there are secrets hidden behind them that no one has yet uncovered. Can you help me find the answer to what lies behind these images?",[]);var e=WA.sound.loadSound("sound/npc/pidgin.mp3");e.play(i)}),WA.room.area.onLeave("npcpidginzone").subscribe(b),WA.room.area.onEnter("npcfrogzone").subscribe(()=>{d=WA.ui.openPopup("npcfrogpopup","FROG: Hey, help me out here! The horse and quokka are making me spin this wheel to generate energy for the server.",[]);var e=WA.sound.loadSound("sound/npc/frog.mp3");e.play(i)}),WA.room.area.onLeave("npcfrogzone").subscribe(b),WA.room.area.onEnter("npcpanda").subscribe(()=>{d=WA.ui.openPopup("npcpandapopup","Friend, don't ask me about Sei, better find me a bamboo.",[]);var e=WA.sound.loadSound("sound/npc/panda.mp3");e.play(i)}),WA.room.area.onLeave("npcpanda").subscribe(b),WA.room.area.onEnter("npcjay").subscribe(()=>{d=WA.ui.openPopup("npcjaypopup","Are you hungry? Sei no more - your food is not here!",[]);var e=WA.sound.loadSound("sound/npc/meat.mp3");e.play(i)}),WA.room.area.onLeave("npcjay").subscribe(b),WA.room.area.onEnter("bubble").subscribe(()=>{var e=WA.sound.loadSound("sound/npc/bubble.mp3");e.play(i),WA.player.onPlayerMove(o=>{p=o.x,c=o.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{var o=WA.sound.loadSound("sound/scan.wav");o.play(i),console.log(p,c),WA.room.website.create({name:"bubblerweb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081947537352699914/bubblers.png?width=596&height=675",position:{x:p+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("bubble").subscribe(()=>{A(),WA.room.website.delete("bubblerweb")}),WA.room.area.onEnter("woodenstatue").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081981852493025300/woodenstatue.png?width=596&height=675",position:{x:p+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("woodenstatue").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("shark").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081947537843425350/sandshark.png?width=596&height=675",position:{x:p+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("shark").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("crystal").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081992872443789373/crystal.png?width=596&height=675",position:{x:p+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("crystal").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("twistedtree").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081995416826040361/tree.png?width=596&height=675",position:{x:p+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("twistedtree").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("bushes").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1082000121409052763/bushes.png?width=596&height=675",position:{x:p+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("bushes").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramidmain").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081654218450010243/e2b43b93f01f5797.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramidmain").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid1").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655031121592320/2.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid1").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid2").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655039891865660/3.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid2").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid3").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655077820965006/4.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid3").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid4").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655106652614746/5.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid4").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("bzzz").subscribe(()=>{var e=WA.sound.loadSound("sound/npc/bzzz.mp3");e.play(i),WA.player.onPlayerMove(o=>{p=o.x,c=o.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{Fe===!1?(m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1083454474737168426/04.png?width=596&height=675",position:{x:p+100,y:c-335,width:596,height:675},allowApi:!0})):WA.nav.openTab("https://media.discordapp.net/attachments/1081590822379720724/1083454474737168426/04.png?width=596&height=675")}})}),WA.room.area.onLeave("bzzz").subscribe(()=>{A(),WA.room.website.delete("coWeb"),ae(),WA.player.getWokaPicture().then(()=>{WA.player.getWokaPicture().then(e=>{const o=String(e);console.log(o)})})}),WA.player.onPlayerMove(e=>{p=e.x,c=e.y,k=e.direction}),WA.room.area.onEnter("monster").subscribe(()=>{console.log(p,c,k),WA.controls.disablePlayerControls(),WA.player.setOutlineColor(255,0,0),k==="left"?(console.log("nav is left"),R=p+400,B=c):k==="right"?(R=p-400,B=c,console.log("right")):k==="up"?(B=c+400,R=p,console.log("up")):k==="down"?(B=c-400,R=p,console.log("down")):console.log("error"),WA.room.showLayer("monsterlab"),m=WA.sound.loadSound("sound/lab/fear.wav").play(i),m=WA.sound.loadSound("sound/lab/monster.wav").play(i),setTimeout(()=>{m=WA.sound.loadSound("sound/lab/scream.wav").play(i)},200),WA.player.moveTo(R,B,20),setTimeout(()=>{WA.controls.restorePlayerControls(),WA.player.removeOutlineColor(),WA.room.hideLayer("monsterlab")},2e3)}),WA.room.area.onLeave("monster").subscribe(()=>{}),WA.room.area.onEnter("teleport").subscribe(()=>{m=WA.sound.loadSound("sound/lab/teleport.wav").play(i),WA.nav.goToRoom("https://play.workadventu.re/_/global/pepe17031.github.io/SeiGame/maps/map.tmj#start")}),WA.room.area.onEnter("labword").subscribe(()=>{m=WA.sound.loadSound("sound/lab/win.mp3").play(i),WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545122669834332/1083019062185041971/2_2.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("labword").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("labfrogzone").subscribe(()=>{d=WA.ui.openPopup("labfrog","If you misbehave, I'll eat you like that frog.",[]);var e=WA.sound.loadSound("sound/lab/frog.wav");e.play(i)}),WA.room.area.onLeave("labfrogzone").subscribe(b),WA.room.area.onEnter("labbobrzone").subscribe(()=>{d=WA.ui.openPopup("labbobr","Hey, you won't get any answers from me, don't even think about that. And remember, I'm watching you!",[]);var e=WA.sound.loadSound("sound/lab/bobr.mp3");e.play(i)}),WA.room.area.onLeave("labbobrzone").subscribe(b),WA.room.area.onEnter("npclava1").subscribe(()=>{d=WA.ui.openPopup("npclava1popup","I'm researching these strange statues and noticed that they have symbols engraved on them. I think a word can be formed from them. Solve the anagram, and perhaps we'll discover the secrets of this planet.",[]);var e=WA.sound.loadSound("sound/npc/wizardlava.wav");e.play(i),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{m=WA.sound.loadSound("sound/scan.wav").play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545477625380936/1088846637566267533/all.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("npclava1").subscribe(()=>{A(),b(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("npclava2").subscribe(()=>{d=WA.ui.openPopup("npclava2popup","I'm studying these crystals and discovered that one of them pulses in a strange rhythm. I believe it's a message encoded in Morse code. Decipher it. You can find hints in my library.",[]);var e=WA.sound.loadSound("sound/lava/fire.wav");e.play(i),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to listen stone",callback:()=>{m=WA.sound.loadSound("sound/lava/seim.mp3").play(i)}})}),WA.room.area.onLeave("npclava2").subscribe(()=>{A(),b(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("lavabooks").subscribe(()=>{m=WA.sound.loadSound("sound/lava/book.wav").play(i),WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545477625380936/1088825752327311440/morze.png?width=676&height=676",position:{x:p-800,y:c-435,width:676,height:676},allowApi:!0}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to listen SOS",callback:()=>{m=WA.sound.loadSound("sound/lava/sosm.mp3").play(i)}})}),WA.room.area.onLeave("lavabooks").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("lavaC").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{var e=WA.sound.loadSound("sound/scan.wav");e.play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545477625380936/1088851020504899604/C.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("lavaC").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("lavaO").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{var e=WA.sound.loadSound("sound/scan.wav");e.play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545477625380936/1088851021431840799/o.png?width=911&height=676",position:{x:p-1e3,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("lavaO").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("lavaS").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{var e=WA.sound.loadSound("sound/scan.wav");e.play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545477625380936/1088851021431840799/o.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("lavaS").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("lavaM").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{var e=WA.sound.loadSound("sound/scan.wav");e.play(i),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545477625380936/1088851020832047224/m.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("lavaM").subscribe(()=>{A(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("npcwater8zone").subscribe(()=>{d=WA.ui.openPopup("npcwater8popup","I am a two-letter word, but I represent something that is all around us. The more you take away, the more I become. What am I",[]);var e=WA.sound.loadSound("sound/under/8.wav");e.play(i)}),WA.room.area.onLeave("npcwater8zone").subscribe(b),WA.room.area.onEnter("npcwatercrabzone").subscribe(()=>{d=WA.ui.openPopup("npcwatercrabpopup","I am a five-letter word, but I am often seen as a single letter on a playing card. I represent a powerful figure. What am I?",[]);var e=WA.sound.loadSound("sound/under/crab.wav");e.play(i)}),WA.room.area.onLeave("npcwatercrabzone").subscribe(b),WA.room.area.onEnter("npcwaterruszone").subscribe(()=>{d=WA.ui.openPopup("npcwaterruspopup","I am a sweet treat often enjoyed after a meal, and I come in many flavors and forms. What am I?",[]);var e=WA.sound.loadSound("sound/under/rus.wav");e.play(i)}),WA.room.area.onLeave("npcwaterruszone").subscribe(b),WA.room.area.onEnter("npcwatersharkzone").subscribe(()=>{d=WA.ui.openPopup("npcwatersharkpopup","I am a part of your body, and I am always in the same place. I cannot be removed or changed, yet I am different for each person. What am I?",[]);var e=WA.sound.loadSound("sound/under/shark.wav");e.play(i)}),WA.room.area.onLeave("npcwatersharkzone").subscribe(b),WA.room.area.onEnter("underinfo").subscribe(()=>{WA.player.onPlayerMove(e=>{p=e.x,c=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{var e=WA.sound.loadSound("sound/scan.wav");e.play(i),d=WA.ui.openPopup("underinfopopup","QUEST UNDERWATER",[]),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545536349835434/1089137081630072914/18fc7226d0914eeb.png?width=911&height=676",position:{x:p+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("underinfo").subscribe(()=>{A(),WA.room.website.delete("coWeb"),b()}),WA.room.area.onEnter("npcoasiszone").subscribe(()=>{d=WA.ui.openPopup("npcoasispopup","OASIS ROBOT",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasiszone").subscribe(b),WA.room.area.onEnter("npcoasis1zone").subscribe(()=>{d=WA.ui.openPopup("npcoasis1popup","Robot #1: T",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasis1zone").subscribe(b),WA.room.area.onEnter("npcoasis2zone").subscribe(()=>{d=WA.ui.openPopup("npcoasis2popup","Robot #2: E",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasis2zone").subscribe(b),WA.room.area.onEnter("npcoasis3zone").subscribe(()=>{d=WA.ui.openPopup("npcoasis3popup","Robot #3: N",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasis3zone").subscribe(b),WA.room.area.onEnter("npcoasis4zone").subscribe(()=>{d=WA.ui.openPopup("npcoasis4popup","Robot #4: D",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasis4zone").subscribe(b),WA.room.area.onEnter("npcoasis5zone").subscribe(()=>{d=WA.ui.openPopup("npcoasis5popup","Robot #5: E",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasis5zone").subscribe(b),WA.room.area.onEnter("npcoasis6zone").subscribe(()=>{d=WA.ui.openPopup("npcoasis6popup","Robot #6: R",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasis6zone").subscribe(b),WA.room.area.onEnter("npcoasis7zone").subscribe(()=>{d=WA.ui.openPopup("npcoasis7popup","Robot #7: M",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasis7zone").subscribe(b),WA.room.area.onEnter("npcoasis8zone").subscribe(()=>{d=WA.ui.openPopup("npcoasis8popup","Robot #8: I",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasis8zone").subscribe(b),WA.room.area.onEnter("npcoasis9zone").subscribe(()=>{d=WA.ui.openPopup("npcoasis9popup","Robot #9: N",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasis9zone").subscribe(b),WA.room.area.onEnter("npcoasis0zone").subscribe(()=>{d=WA.ui.openPopup("npcoasis0popup","Robot #10: T",[]);var e=WA.sound.loadSound("sound/npc/robot2.mp3");e.play(i)}),WA.room.area.onLeave("npcoasis0zone").subscribe(b),Xe().then(()=>{console.log("Scripting API Extra ready")}).catch(e=>console.error(e))}).catch(e=>console.error(e));function b(){d!==void 0&&(d.close(),d=void 0)}function Ze(){_!==void 0&&(_.close(),_=void 0)}function A(){y!==void 0&&(y.remove(),y=void 0)}function ae(){m!==void 0&&(WA.sound.loadSound(m).stop(),m=void 0)}var i={volume:.4,loop:!1,rate:1,detune:1,delay:0,seek:0,mute:!1};
