class G{constructor(t){this.properties=t??[]}get(t){const o=this.properties.filter(n=>n.name===t).map(n=>n.value);if(o.length>1)throw new Error('Expected only one property to be named "'+t+'"');if(o.length!==0)return o[0]}getString(t){return this.getByType(t,"string")}getNumber(t){return this.getByType(t,"number")}getBoolean(t){return this.getByType(t,"boolean")}getByType(t,o){const n=this.get(t);if(n!==void 0){if(o!=="json"&&typeof n!==o)throw new Error('Expected property "'+t+'" to have type "'+o+'"');return n}}mustGetString(t){return this.mustGetByType(t,"string")}mustGetNumber(t){return this.mustGetByType(t,"number")}mustGetBoolean(t){return this.mustGetByType(t,"boolean")}mustGetByType(t,o){const n=this.get(t);if(n===void 0)throw new Error('Property "'+t+'" is missing');if(o!=="json"&&typeof n!==o)throw new Error('Expected property "'+t+'" to have type "'+o+'"');return n}getType(t){const o=this.properties.filter(n=>n.name===t).map(n=>n.type);if(o.length>1)throw new Error('Expected only one property to be named "'+t+'"');if(o.length!==0)return o[0]}}const K="https://unpkg.com/@workadventure/scripting-api-extra@1.4.6/dist";class de{constructor(t){this.name=t.name,this.x=t.x,this.y=t.y,this.properties=new G(t.properties)}get isReadable(){const t=this.properties.getString("readableBy");return t?WA.player.tags.includes(t):!0}get isWritable(){const t=this.properties.getString("writableBy");return t?WA.player.tags.includes(t):!0}}function F(e){const t=e?"#"+e.join():"";WA.nav.openCoWebSite(K+"/configuration.html"+t)}async function he(e,t){const o=await WA.room.getTiledMap(),n=new Map;return ae(o.layers,n,e,t),n}function ae(e,t,o,n){for(const r of e)if(r.type==="objectgroup"){for(const a of r.objects)if(a.type==="variable"||a.class==="variable"){if(o&&r.name!==o||n&&!n.includes(a.name))continue;t.set(a.name,new de(a))}}else r.type==="group"&&ae(r.layers,t,o,n)}let q;async function V(){return q===void 0&&(q=fe()),q}async function fe(){return ye(await WA.room.getTiledMap())}function ye(e){const t=new Map;return se(e.layers,"",t),t}function se(e,t,o){for(const n of e)n.type==="group"?se(n.layers,t+n.name+"/",o):(n.name=t+n.name,o.set(n.name,n))}async function ge(){const e=await V(),t=[];for(const o of e.values())if(o.type==="objectgroup")for(const n of o.objects)(n.type==="area"||n.class==="area")&&t.push(n);return t}function be(e){let t=1/0,o=1/0,n=0,r=0;const a=e.data;if(typeof a=="string")throw new Error("Unsupported tile layer data stored as string instead of CSV");for(let s=0;s<e.height;s++)for(let i=0;i<e.width;i++)a[i+s*e.width]!==0&&(t=Math.min(t,i),r=Math.max(r,i),o=Math.min(o,s),n=Math.max(n,s));return{top:o,left:t,right:r+1,bottom:n+1}}function ie(e){let t=1/0,o=1/0,n=0,r=0;for(const a of e){const s=be(a);s.left<t&&(t=s.left),s.top<o&&(o=s.top),s.right>r&&(r=s.right),s.bottom>n&&(n=s.bottom)}return{top:o,left:t,right:r,bottom:n}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var me=Object.prototype.toString,x=Array.isArray||function(t){return me.call(t)==="[object Array]"};function X(e){return typeof e=="function"}function Ae(e){return x(e)?"array":typeof e}function H(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function J(e,t){return e!=null&&typeof e=="object"&&t in e}function We(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var we=RegExp.prototype.test;function ve(e,t){return we.call(e,t)}var Se=/\S/;function Pe(e){return!ve(Se,e)}var Ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Le(e){return String(e).replace(/[&<>"'`=\/]/g,function(o){return Ce[o]})}var Ee=/\s*/,Me=/\s+/,Q=/\s*=/,ke=/\s*\}/,Te=/#|\^|\/|>|\{|&|=|!/;function xe(e,t){if(!e)return[];var o=!1,n=[],r=[],a=[],s=!1,i=!1,u="",h=0;function y(){if(s&&!i)for(;a.length;)delete r[a.pop()];else a=[];s=!1,i=!1}var W,P,U;function B(L){if(typeof L=="string"&&(L=L.split(Me,2)),!x(L)||L.length!==2)throw new Error("Invalid tags: "+L);W=new RegExp(H(L[0])+"\\s*"),P=new RegExp("\\s*"+H(L[1])),U=new RegExp("\\s*"+H("}"+L[1]))}B(t||A.tags);for(var d=new O(e),C,m,v,R,_,M;!d.eos();){if(C=d.pos,v=d.scanUntil(W),v)for(var N=0,pe=v.length;N<pe;++N)R=v.charAt(N),Pe(R)?(a.push(r.length),u+=R):(i=!0,o=!0,u+=" "),r.push(["text",R,C,C+1]),C+=1,R===`
`&&(y(),u="",h=0,o=!1);if(!d.scan(W))break;if(s=!0,m=d.scan(Te)||"name",d.scan(Ee),m==="="?(v=d.scanUntil(Q),d.scan(Q),d.scanUntil(P)):m==="{"?(v=d.scanUntil(U),d.scan(ke),d.scanUntil(P),m="&"):v=d.scanUntil(P),!d.scan(P))throw new Error("Unclosed tag at "+d.pos);if(m==">"?_=[m,v,C,d.pos,u,h,o]:_=[m,v,C,d.pos],h++,r.push(_),m==="#"||m==="^")n.push(_);else if(m==="/"){if(M=n.pop(),!M)throw new Error('Unopened section "'+v+'" at '+C);if(M[1]!==v)throw new Error('Unclosed section "'+M[1]+'" at '+C)}else m==="name"||m==="{"||m==="&"?i=!0:m==="="&&B(v)}if(y(),M=n.pop(),M)throw new Error('Unclosed section "'+M[1]+'" at '+d.pos);return Re(Be(r))}function Be(e){for(var t=[],o,n,r=0,a=e.length;r<a;++r)o=e[r],o&&(o[0]==="text"&&n&&n[0]==="text"?(n[1]+=o[1],n[3]=o[3]):(t.push(o),n=o));return t}function Re(e){for(var t=[],o=t,n=[],r,a,s=0,i=e.length;s<i;++s)switch(r=e[s],r[0]){case"#":case"^":o.push(r),n.push(r),o=r[4]=[];break;case"/":a=n.pop(),a[5]=r[2],o=n.length>0?n[n.length-1][4]:t;break;default:o.push(r)}return t}function O(e){this.string=e,this.tail=e,this.pos=0}O.prototype.eos=function(){return this.tail===""};O.prototype.scan=function(t){var o=this.tail.match(t);if(!o||o.index!==0)return"";var n=o[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};O.prototype.scanUntil=function(t){var o=this.tail.search(t),n;switch(o){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,o),this.tail=this.tail.substring(o)}return this.pos+=n.length,n};function T(e,t){this.view=e,this.cache={".":this.view},this.parent=t}T.prototype.push=function(t){return new T(t,this)};T.prototype.lookup=function(t){var o=this.cache,n;if(o.hasOwnProperty(t))n=o[t];else{for(var r=this,a,s,i,u=!1;r;){if(t.indexOf(".")>0)for(a=r.view,s=t.split("."),i=0;a!=null&&i<s.length;)i===s.length-1&&(u=J(a,s[i])||We(a,s[i])),a=a[s[i++]];else a=r.view[t],u=J(r.view,t);if(u){n=a;break}r=r.parent}o[t]=n}return X(n)&&(n=n.call(this.view)),n};function b(){this.templateCache={_cache:{},set:function(t,o){this._cache[t]=o},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}b.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};b.prototype.parse=function(t,o){var n=this.templateCache,r=t+":"+(o||A.tags).join(":"),a=typeof n<"u",s=a?n.get(r):void 0;return s==null&&(s=xe(t,o),a&&n.set(r,s)),s};b.prototype.render=function(t,o,n,r){var a=this.getConfigTags(r),s=this.parse(t,a),i=o instanceof T?o:new T(o,void 0);return this.renderTokens(s,i,n,t,r)};b.prototype.renderTokens=function(t,o,n,r,a){for(var s="",i,u,h,y=0,W=t.length;y<W;++y)h=void 0,i=t[y],u=i[0],u==="#"?h=this.renderSection(i,o,n,r,a):u==="^"?h=this.renderInverted(i,o,n,r,a):u===">"?h=this.renderPartial(i,o,n,a):u==="&"?h=this.unescapedValue(i,o):u==="name"?h=this.escapedValue(i,o,a):u==="text"&&(h=this.rawValue(i)),h!==void 0&&(s+=h);return s};b.prototype.renderSection=function(t,o,n,r,a){var s=this,i="",u=o.lookup(t[1]);function h(P){return s.render(P,o,n,a)}if(u){if(x(u))for(var y=0,W=u.length;y<W;++y)i+=this.renderTokens(t[4],o.push(u[y]),n,r,a);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")i+=this.renderTokens(t[4],o.push(u),n,r,a);else if(X(u)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(o.view,r.slice(t[3],t[5]),h),u!=null&&(i+=u)}else i+=this.renderTokens(t[4],o,n,r,a);return i}};b.prototype.renderInverted=function(t,o,n,r,a){var s=o.lookup(t[1]);if(!s||x(s)&&s.length===0)return this.renderTokens(t[4],o,n,r,a)};b.prototype.indentPartial=function(t,o,n){for(var r=o.replace(/[^ \t]/g,""),a=t.split(`
`),s=0;s<a.length;s++)a[s].length&&(s>0||!n)&&(a[s]=r+a[s]);return a.join(`
`)};b.prototype.renderPartial=function(t,o,n,r){if(n){var a=this.getConfigTags(r),s=X(n)?n(t[1]):n[t[1]];if(s!=null){var i=t[6],u=t[5],h=t[4],y=s;u==0&&h&&(y=this.indentPartial(s,h,i));var W=this.parse(y,a);return this.renderTokens(W,o,n,y,r)}}};b.prototype.unescapedValue=function(t,o){var n=o.lookup(t[1]);if(n!=null)return n};b.prototype.escapedValue=function(t,o,n){var r=this.getConfigEscape(n)||A.escape,a=o.lookup(t[1]);if(a!=null)return typeof a=="number"&&r===A.escape?String(a):r(a)};b.prototype.rawValue=function(t){return t[1]};b.prototype.getConfigTags=function(t){return x(t)?t:t&&typeof t=="object"?t.tags:void 0};b.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!x(t))return t.escape};var A={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){j.templateCache=e},get templateCache(){return j.templateCache}},j=new b;A.clearCache=function(){return j.clearCache()};A.parse=function(t,o){return j.parse(t,o)};A.render=function(t,o,n,r){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Ae(t)+'" was given as the first argument for mustache#render(template, view, partials)');return j.render(t,o,n,r)};A.escape=Le;A.Scanner=O;A.Context=T;A.Writer=b;class ue{constructor(t,o){this.template=t,this.state=o,this.ast=A.parse(t)}getValue(){return this.value===void 0&&(this.value=A.render(this.template,this.state)),this.value}onChange(t){const o=[];for(const n of this.getUsedVariables().values())o.push(this.state.onVariableChange(n).subscribe(()=>{const r=A.render(this.template,this.state);r!==this.value&&(this.value=r,t(this.value))}));return{unsubscribe:()=>{for(const n of o)n.unsubscribe()}}}isPureString(){return this.ast.length===0||this.ast.length===1&&this.ast[0][0]==="text"}getUsedVariables(){const t=new Set;return this.recursiveGetUsedVariables(this.ast,t),t}recursiveGetUsedVariables(t,o){for(const n of t){const r=n[0],a=n[1],s=n[4];["name","&","#","^"].includes(r)&&o.add(a),s!==void 0&&typeof s!="string"&&this.recursiveGetUsedVariables(s,o)}}}async function Ie(){var e;const t=await ge();for(const o of t){const n=(e=o.properties)!==null&&e!==void 0?e:[];for(const r of n){if(r.type==="int"||r.type==="bool"||r.type==="object"||typeof r.value!="string")continue;const a=new ue(r.value,WA.state);if(a.isPureString())continue;const s=a.getValue();await ee(o.name,r.name,s),a.onChange(async i=>{await ee(o.name,r.name,i)})}}}async function ze(){var e;const t=await V();for(const[o,n]of t.entries())if(n.type!=="objectgroup"){const r=(e=n.properties)!==null&&e!==void 0?e:[];for(const a of r){if(a.type==="int"||a.type==="bool"||a.type==="object"||typeof a.value!="string")continue;const s=new ue(a.value,WA.state);if(s.isPureString())continue;const i=s.getValue();te(o,a.name,i),s.onChange(u=>{te(o,a.name,u)})}}}async function ee(e,t,o){console.log(e),(await WA.room.area.get(e)).setProperty(t,o)}function te(e,t,o){WA.room.setProperty(e,t,o),t==="visible"&&(o?WA.room.showLayer(e):WA.room.hideLayer(e))}let $,Y=0,Z=0;function oe(e){if(WA.state[e.name]){let t=e.properties.mustGetString("openLayer");for(const o of t.split(`
`))WA.room.showLayer(o);t=e.properties.mustGetString("closeLayer");for(const o of t.split(`
`))WA.room.hideLayer(o)}else{let t=e.properties.mustGetString("openLayer");for(const o of t.split(`
`))WA.room.hideLayer(o);t=e.properties.mustGetString("closeLayer");for(const o of t.split(`
`))WA.room.showLayer(o)}}function Ge(e){const t=e.properties.getString("openSound"),o=e.properties.getNumber("soundRadius");let n=1;if(o){const r=ce(e.properties.mustGetString("openLayer").split(`
`));if(r>o)return;n=1-r/o}t&&WA.sound.loadSound(t).play({volume:n})}function je(e){const t=e.properties.getString("closeSound"),o=e.properties.getNumber("soundRadius");let n=1;if(o){const r=ce(e.properties.mustGetString("closeLayer").split(`
`));if(r>o)return;n=1-r/o}t&&WA.sound.loadSound(t).play({volume:n})}function le(e){return e.map(t=>$.get(t)).filter(t=>(t==null?void 0:t.type)==="tilelayer")}function ce(e){const t=le(e),o=ie(t),n=((o.right-o.left)/2+o.left)*32,r=((o.bottom-o.top)/2+o.top)*32;return Math.sqrt(Math.pow(Y-n,2)+Math.pow(Z-r,2))}function Ve(e){WA.state.onVariableChange(e.name).subscribe(()=>{WA.state[e.name]?Ge(e):je(e),oe(e)}),oe(e)}function Oe(e,t,o,n){const r=e.name;let a,s,i=!1;const u=o.getString("tag");let h=!0;u&&!WA.player.tags.includes(u)&&(h=!1);const y=!!u;function W(){var d;a&&a.remove(),a=WA.ui.displayActionMessage({message:(d=o.getString("closeTriggerMessage"))!==null&&d!==void 0?d:"Press SPACE to close the door",callback:()=>{WA.state[t.name]=!1,P()}})}function P(){var d;a&&a.remove(),a=WA.ui.displayActionMessage({message:(d=o.getString("openTriggerMessage"))!==null&&d!==void 0?d:"Press SPACE to open the door",callback:()=>{WA.state[t.name]=!0,W()}})}function U(d){const C=ie(le(t.properties.mustGetString("closeLayer").split(`
`)));s=WA.room.website.create({name:"doorKeypad"+d,url:n+"/keypad.html#"+encodeURIComponent(d),position:{x:C.right*32,y:C.top*32,width:32*3,height:32*4},allowApi:!0})}function B(){s&&(WA.room.website.delete(s.name),s=void 0)}WA.room.onEnterLayer(r).subscribe(()=>{if(i=!0,o.getBoolean("autoOpen")&&h){WA.state[t.name]=!0;return}if(!WA.state[t.name]&&(y&&!h||!y)&&(o.getString("code")||o.getString("codeVariable"))){U(r);return}h&&(WA.state[t.name]?W():P())}),WA.room.onLeaveLayer(r).subscribe(()=>{i=!1,o.getBoolean("autoClose")&&(WA.state[t.name]=!1),a&&a.remove(),B()}),WA.state.onVariableChange(t.name).subscribe(()=>{i&&(!o.getBoolean("autoClose")&&WA.state[t.name]===!0&&W(),s&&WA.state[t.name]===!0&&B(),!o.getBoolean("autoOpen")&&WA.state[t.name]===!1&&P())})}function Ue(e){const t=e.properties.mustGetString("bellSound"),o=e.properties.getNumber("soundRadius");let n=1;if(o){const r=Math.sqrt(Math.pow(e.x-Y,2)+Math.pow(e.y-Z,2));if(r>o)return;n=1-r/o}WA.sound.loadSound(t).play({volume:n})}function _e(e){WA.state[e.name]===void 0&&(WA.state[e.name]=0),WA.state.onVariableChange(e.name).subscribe(()=>{WA.state[e.name]&&Ue(e)})}function De(e,t,o){let n;const r=t.getString("bellPopup");WA.room.onEnterLayer(o).subscribe(()=>{var a;r?n=WA.ui.openPopup(r,"",[{label:(a=t.getString("bellButtonText"))!==null&&a!==void 0?a:"Ring",callback:()=>{WA.state[e]=WA.state[e]+1}}]):WA.state[e]=WA.state[e]+1}),WA.room.onLeaveLayer(o).subscribe(()=>{n&&(n.close(),n=void 0)})}async function Ne(e){e=e??K;const t=await he();$=await V();for(const o of t.values())o.properties.get("door")&&Ve(o),o.properties.get("bell")&&_e(o);for(const o of $.values()){const n=new G(o.properties),r=n.getString("doorVariable");if(r&&o.type==="tilelayer"){const s=t.get(r);if(s===void 0)throw new Error('Cannot find variable "'+r+'" referred in the "doorVariable" property of layer "'+o.name+'"');Oe(o,s,n,e)}const a=n.getString("bellVariable");a&&De(a,n,o.name)}WA.player.onPlayerMove(o=>{Y=o.x,Z=o.y})}function qe(e,t){const o=e.getString("bindVariable");if(o){const n=e.get("enterValue"),r=e.get("leaveValue"),a=e.getString("triggerMessage"),s=e.getString("tag");He(o,t,n,r,a,s)}}function He(e,t,o,n,r,a){a&&!WA.player.tags.includes(a)||(o!==void 0&&WA.room.onEnterLayer(t).subscribe(()=>{r||(WA.state[e]=o)}),n!==void 0&&WA.room.onLeaveLayer(t).subscribe(()=>{WA.state[e]=n}))}async function $e(){const e=await V();for(const t of e.values()){const o=new G(t.properties);qe(o,t.name)}}let ne;async function Ke(e){const t=await WA.room.getTiledMap();e=e??K,ne=await V();const o=t.layers.find(n=>n.name==="configuration");if(o){const r=new G(o.properties).getString("tag");(!r||WA.player.tags.includes(r))&&WA.ui.registerMenuCommand("Configure the room",()=>{WA.nav.openCoWebSite(e+"/configuration.html",!0)});for(const a of ne.values()){const s=new G(a.properties),i=s.getString("openConfig");i&&a.type==="tilelayer"&&Xe(i.split(","),a.name,s)}}}function Xe(e,t,o){let n;const r=o.getString("openConfigAdminTag");let a=!0;r&&!WA.player.tags.includes(r)&&(a=!1);function s(){var u;n&&n.remove(),n=WA.ui.displayActionMessage({message:(u=o.getString("openConfigTriggerMessage"))!==null&&u!==void 0?u:"Press SPACE or touch here to configure",callback:()=>F(e)})}function i(){WA.nav.closeCoWebSite()}WA.room.onEnterLayer(t).subscribe(()=>{const u=o.getString("openConfigTrigger");a&&(u&&u==="onaction"?s():F(e))}),WA.room.onLeaveLayer(t).subscribe(()=>{n&&n.remove(),i()})}function Ye(){return WA.onInit().then(()=>{Ne().catch(e=>console.error(e)),$e().catch(e=>console.error(e)),Ke().catch(e=>console.error(e)),ze().catch(e=>console.error(e)),Ie().catch(e=>console.error(e))}).catch(e=>console.error(e))}console.log("Script started successfully");let S,D,g,f,l=0,c=0,k,I=0,z=0;WA.onInit().then(()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags),WA.room.hideLayer("monsterlab"),WA.room.area.onEnter("sfire").subscribe(()=>{f=WA.sound.loadSound("sound/fire2.wav").play(p)}),WA.room.area.onLeave("sfire").subscribe(()=>{re()}),WA.room.area.onEnter("npcpiratezone").subscribe(()=>{S=WA.ui.openPopup("npcpiratepopup","CAPTAIN BOTTLE-TOP: Welcome aboard, matey! Our ship crashed on this planet, and we need to find all the fragments of the disk with pieces of the encryption key to restart the ship's systems and return home. Each fragment contains a part of the key necessary to start up systems like engines and fire-extinguishing system.",[]);var e=WA.sound.loadSound("sound/npc/pirate.wav");e.play(p)}),WA.room.area.onLeave("npcpiratezone").subscribe(E),WA.room.area.onEnter("npcrobotzone").subscribe(()=>{S=WA.ui.openPopup("npcrobotpopup","IRON SAMSON: Excellent! Did you complete the task? I don't know, and I don't care. Now, enter your answers into the terminal, and I'll see if you did the task right. Hope you remember how to use a keyboard, ha-ha-ha!",[]);var e=WA.sound.loadSound("sound/npc/robot.mp3");e.play(p)}),WA.room.area.onLeave("npcrobotzone").subscribe(E),WA.room.area.onEnter("npcadminzone").subscribe(()=>{S=WA.ui.openPopup("npcadmin1popup","BoJack: Did you notice the violation? Lets ban him?",[]),D=WA.ui.openPopup("npcadmin2popup","Zaragossa: I'll keep an eye on him from an ambush...",[]);var e=WA.sound.loadSound("sound/npc/horse.mp3");e.play(p);var t=WA.sound.loadSound("sound/npc/mouse.mp3");t.play(p)}),WA.room.area.onLeave("npcadminzone").subscribe(E),WA.room.area.onLeave("npcadminzone").subscribe(Ze),WA.room.area.onEnter("npcpidginzone").subscribe(()=>{S=WA.ui.openPopup("npcpidginpopup","FLIPPER: Hello! I find myself in a strange place surrounded by ancient Egyptian pyramids, and I feel that there are secrets hidden behind them that no one has yet uncovered. Can you help me find the answer to what lies behind these images?",[]);var e=WA.sound.loadSound("sound/npc/pidgin.mp3");e.play(p)}),WA.room.area.onLeave("npcpidginzone").subscribe(E),WA.room.area.onEnter("npcfrogzone").subscribe(()=>{S=WA.ui.openPopup("npcfrogpopup","FROG: Hey, help me out here! The horse and quokka are making me spin this wheel to generate energy for the server.",[]);var e=WA.sound.loadSound("sound/npc/frog.mp3");e.play(p)}),WA.room.area.onLeave("npcfrogzone").subscribe(E),WA.room.area.onEnter("npcpanda").subscribe(()=>{S=WA.ui.openPopup("npcpandapopup","Friend, don't ask me about Sei, better find me a bamboo.",[]);var e=WA.sound.loadSound("sound/npc/panda.mp3");e.play(p)}),WA.room.area.onLeave("npcpanda").subscribe(E),WA.room.area.onEnter("npcjay").subscribe(()=>{S=WA.ui.openPopup("npcjaypopup","Are you hungry? Sei no more - your food is not here!",[]);var e=WA.sound.loadSound("sound/npc/meat.mp3");e.play(p)}),WA.room.area.onLeave("npcjay").subscribe(E),WA.room.area.onEnter("bubble").subscribe(()=>{var e=WA.sound.loadSound("sound/npc/bubble.mp3");e.play(p),WA.player.onPlayerMove(t=>{l=t.x,c=t.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{var t=WA.sound.loadSound("sound/scan.wav");t.play(p),console.log(l,c),WA.room.website.create({name:"bubblerweb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081947537352699914/bubblers.png?width=596&height=675",position:{x:l+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("bubble").subscribe(()=>{w(),WA.room.website.delete("bubblerweb")}),WA.room.area.onEnter("woodenstatue").subscribe(()=>{WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081981852493025300/woodenstatue.png?width=596&height=675",position:{x:l+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("woodenstatue").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("shark").subscribe(()=>{WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081947537843425350/sandshark.png?width=596&height=675",position:{x:l+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("shark").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("crystal").subscribe(()=>{WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081992872443789373/crystal.png?width=596&height=675",position:{x:l+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("crystal").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("twistedtree").subscribe(()=>{WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081995416826040361/tree.png?width=596&height=675",position:{x:l+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("twistedtree").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("bushes").subscribe(()=>{WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1082000121409052763/bushes.png?width=596&height=675",position:{x:l+100,y:c-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("bushes").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramidmain").subscribe(()=>{WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081654218450010243/e2b43b93f01f5797.png?width=911&height=676",position:{x:l+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramidmain").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid1").subscribe(()=>{WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655031121592320/2.png?width=911&height=676",position:{x:l+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid1").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid2").subscribe(()=>{WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655039891865660/3.png?width=911&height=676",position:{x:l+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid2").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid3").subscribe(()=>{WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655077820965006/4.png?width=911&height=676",position:{x:l+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid3").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid4").subscribe(()=>{WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655106652614746/5.png?width=911&height=676",position:{x:l+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid4").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("bzzz").subscribe(()=>{var e=WA.sound.loadSound("sound/npc/bzzz.mp3");e.play(p),WA.player.onPlayerMove(t=>{l=t.x,c=t.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655106652614746/5.png?width=911&height=676",position:{x:l+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("bzzz").subscribe(()=>{w(),WA.room.website.delete("coWeb"),re()}),WA.player.onPlayerMove(e=>{l=e.x,c=e.y,k=e.direction}),WA.room.area.onEnter("monster").subscribe(()=>{console.log(l,c,k),WA.controls.disablePlayerControls(),WA.player.setOutlineColor(255,0,0),k==="left"?(console.log("nav is left"),I=l+400,z=c):k==="right"?(I=l-400,z=c,console.log("right")):k==="up"?(z=c+400,I=l,console.log("up")):k==="down"?(z=c-400,I=l,console.log("down")):console.log("error"),WA.room.showLayer("monsterlab"),f=WA.sound.loadSound("sound/lab/fear.wav").play(p),f=WA.sound.loadSound("sound/lab/monster.wav").play(p),setTimeout(()=>{f=WA.sound.loadSound("sound/lab/scream.wav").play(p)},200),WA.player.moveTo(I,z,20),setTimeout(()=>{WA.controls.restorePlayerControls(),WA.player.removeOutlineColor(),WA.room.hideLayer("monsterlab")},2e3)}),WA.room.area.onLeave("monster").subscribe(()=>{}),WA.room.area.onEnter("teleport").subscribe(()=>{f=WA.sound.loadSound("sound/lab/teleport.wav").play(p),WA.nav.goToRoom("https://play.workadventu.re/_/global/pepe17031.github.io/SeiGame/maps/map.tmj#start")}),WA.room.area.onEnter("labword").subscribe(()=>{f=WA.sound.loadSound("sound/lab/win.mp3").play(p),WA.player.onPlayerMove(e=>{l=e.x,c=e.y}),g=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{f=WA.sound.loadSound("sound/scan.wav").play(p),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545122669834332/1083019062185041971/2_2.png?width=911&height=676",position:{x:l+100,y:c-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("labword").subscribe(()=>{w(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("labfrogzone").subscribe(()=>{S=WA.ui.openPopup("labfrog","Hey buddy. I was running from the moderators and got lost. Something weird is going on here... But you know, I like it, don't tell anyone you saw me.",[]);var e=WA.sound.loadSound("sound/lab/frog.wav");e.play(p)}),WA.room.area.onLeave("labfrogzone").subscribe(E),WA.room.area.onEnter("labbobrzone").subscribe(()=>{S=WA.ui.openPopup("labbobr","TEXT B",[]);var e=WA.sound.loadSound("sound/lab/bobr.mp3");e.play(p)}),WA.room.area.onLeave("labbobrzone").subscribe(E),Ye().then(()=>{console.log("Scripting API Extra ready")}).catch(e=>console.error(e))}).catch(e=>console.error(e));function E(){S!==void 0&&(S.close(),S=void 0)}function Ze(){D!==void 0&&(D.close(),D=void 0)}function w(){g!==void 0&&(g.remove(),g=void 0)}function re(){f!==void 0&&(WA.sound.loadSound(f).stop(),f=void 0)}var p={volume:.4,loop:!1,rate:1,detune:1,delay:0,seek:0,mute:!1};
