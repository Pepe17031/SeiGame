class R{constructor(e){this.properties=e??[]}get(e){const n=this.properties.filter(o=>o.name===e).map(o=>o.value);if(n.length>1)throw new Error('Expected only one property to be named "'+e+'"');if(n.length!==0)return n[0]}getString(e){return this.getByType(e,"string")}getNumber(e){return this.getByType(e,"number")}getBoolean(e){return this.getByType(e,"boolean")}getByType(e,n){const o=this.get(e);if(o!==void 0){if(n!=="json"&&typeof o!==n)throw new Error('Expected property "'+e+'" to have type "'+n+'"');return o}}mustGetString(e){return this.mustGetByType(e,"string")}mustGetNumber(e){return this.mustGetByType(e,"number")}mustGetBoolean(e){return this.mustGetByType(e,"boolean")}mustGetByType(e,n){const o=this.get(e);if(o===void 0)throw new Error('Property "'+e+'" is missing');if(n!=="json"&&typeof o!==n)throw new Error('Expected property "'+e+'" to have type "'+n+'"');return o}getType(e){const n=this.properties.filter(o=>o.name===e).map(o=>o.type);if(n.length>1)throw new Error('Expected only one property to be named "'+e+'"');if(n.length!==0)return n[0]}}const q="https://unpkg.com/@workadventure/scripting-api-extra@1.4.6/dist";class ce{constructor(e){this.name=e.name,this.x=e.x,this.y=e.y,this.properties=new R(e.properties)}get isReadable(){const e=this.properties.getString("readableBy");return e?WA.player.tags.includes(e):!0}get isWritable(){const e=this.properties.getString("writableBy");return e?WA.player.tags.includes(e):!0}}function X(t){const e=t?"#"+t.join():"";WA.nav.openCoWebSite(q+"/configuration.html"+e)}async function le(t,e){const n=await WA.room.getTiledMap(),o=new Map;return ne(n.layers,o,t,e),o}function ne(t,e,n,o){for(const r of t)if(r.type==="objectgroup"){for(const a of r.objects)if(a.type==="variable"||a.class==="variable"){if(n&&r.name!==n||o&&!o.includes(a.name))continue;e.set(a.name,new ce(a))}}else r.type==="group"&&ne(r.layers,e,n,o)}let D;async function G(){return D===void 0&&(D=pe()),D}async function pe(){return de(await WA.room.getTiledMap())}function de(t){const e=new Map;return oe(t.layers,"",e),e}function oe(t,e,n){for(const o of t)o.type==="group"?oe(o.layers,e+o.name+"/",n):(o.name=e+o.name,n.set(o.name,o))}async function fe(){const t=await G(),e=[];for(const n of t.values())if(n.type==="objectgroup")for(const o of n.objects)(o.type==="area"||o.class==="area")&&e.push(o);return e}function he(t){let e=1/0,n=1/0,o=0,r=0;const a=t.data;if(typeof a=="string")throw new Error("Unsupported tile layer data stored as string instead of CSV");for(let s=0;s<t.height;s++)for(let i=0;i<t.width;i++)a[i+s*t.width]!==0&&(e=Math.min(e,i),r=Math.max(r,i),n=Math.min(n,s),o=Math.max(o,s));return{top:n,left:e,right:r+1,bottom:o+1}}function re(t){let e=1/0,n=1/0,o=0,r=0;for(const a of t){const s=he(a);s.left<e&&(e=s.left),s.top<n&&(n=s.top),s.right>r&&(r=s.right),s.bottom>o&&(o=s.bottom)}return{top:n,left:e,right:r,bottom:o}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var ye=Object.prototype.toString,T=Array.isArray||function(e){return ye.call(e)==="[object Array]"};function $(t){return typeof t=="function"}function ge(t){return T(t)?"array":typeof t}function _(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Y(t,e){return t!=null&&typeof t=="object"&&e in t}function me(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var be=RegExp.prototype.test;function Ae(t,e){return be.call(t,e)}var We=/\S/;function we(t){return!Ae(We,t)}var ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Se(t){return String(t).replace(/[&<>"'`=\/]/g,function(n){return ve[n]})}var Pe=/\s*/,Ce=/\s+/,Z=/\s*=/,Ee=/\s*\}/,Le=/#|\^|\/|>|\{|&|=|!/;function Me(t,e){if(!t)return[];var n=!1,o=[],r=[],a=[],s=!1,i=!1,u="",d=0;function h(){if(s&&!i)for(;a.length;)delete r[a.pop()];else a=[];s=!1,i=!1}var W,S,z;function x(E){if(typeof E=="string"&&(E=E.split(Ce,2)),!T(E)||E.length!==2)throw new Error("Invalid tags: "+E);W=new RegExp(_(E[0])+"\\s*"),S=new RegExp("\\s*"+_(E[1])),z=new RegExp("\\s*"+_("}"+E[1]))}x(e||A.tags);for(var c=new j(t),P,b,w,B,V,L;!c.eos();){if(P=c.pos,w=c.scanUntil(W),w)for(var U=0,ue=w.length;U<ue;++U)B=w.charAt(U),we(B)?(a.push(r.length),u+=B):(i=!0,n=!0,u+=" "),r.push(["text",B,P,P+1]),P+=1,B===`
`&&(h(),u="",d=0,n=!1);if(!c.scan(W))break;if(s=!0,b=c.scan(Le)||"name",c.scan(Pe),b==="="?(w=c.scanUntil(Z),c.scan(Z),c.scanUntil(S)):b==="{"?(w=c.scanUntil(z),c.scan(Ee),c.scanUntil(S),b="&"):w=c.scanUntil(S),!c.scan(S))throw new Error("Unclosed tag at "+c.pos);if(b==">"?V=[b,w,P,c.pos,u,d,n]:V=[b,w,P,c.pos],d++,r.push(V),b==="#"||b==="^")o.push(V);else if(b==="/"){if(L=o.pop(),!L)throw new Error('Unopened section "'+w+'" at '+P);if(L[1]!==w)throw new Error('Unclosed section "'+L[1]+'" at '+P)}else b==="name"||b==="{"||b==="&"?i=!0:b==="="&&x(w)}if(h(),L=o.pop(),L)throw new Error('Unclosed section "'+L[1]+'" at '+c.pos);return Te(ke(r))}function ke(t){for(var e=[],n,o,r=0,a=t.length;r<a;++r)n=t[r],n&&(n[0]==="text"&&o&&o[0]==="text"?(o[1]+=n[1],o[3]=n[3]):(e.push(n),o=n));return e}function Te(t){for(var e=[],n=e,o=[],r,a,s=0,i=t.length;s<i;++s)switch(r=t[s],r[0]){case"#":case"^":n.push(r),o.push(r),n=r[4]=[];break;case"/":a=o.pop(),a[5]=r[2],n=o.length>0?o[o.length-1][4]:e;break;default:n.push(r)}return e}function j(t){this.string=t,this.tail=t,this.pos=0}j.prototype.eos=function(){return this.tail===""};j.prototype.scan=function(e){var n=this.tail.match(e);if(!n||n.index!==0)return"";var o=n[0];return this.tail=this.tail.substring(o.length),this.pos+=o.length,o};j.prototype.scanUntil=function(e){var n=this.tail.search(e),o;switch(n){case-1:o=this.tail,this.tail="";break;case 0:o="";break;default:o=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=o.length,o};function k(t,e){this.view=t,this.cache={".":this.view},this.parent=e}k.prototype.push=function(e){return new k(e,this)};k.prototype.lookup=function(e){var n=this.cache,o;if(n.hasOwnProperty(e))o=n[e];else{for(var r=this,a,s,i,u=!1;r;){if(e.indexOf(".")>0)for(a=r.view,s=e.split("."),i=0;a!=null&&i<s.length;)i===s.length-1&&(u=Y(a,s[i])||me(a,s[i])),a=a[s[i++]];else a=r.view[e],u=Y(r.view,e);if(u){o=a;break}r=r.parent}n[e]=o}return $(o)&&(o=o.call(this.view)),o};function m(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}m.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};m.prototype.parse=function(e,n){var o=this.templateCache,r=e+":"+(n||A.tags).join(":"),a=typeof o<"u",s=a?o.get(r):void 0;return s==null&&(s=Me(e,n),a&&o.set(r,s)),s};m.prototype.render=function(e,n,o,r){var a=this.getConfigTags(r),s=this.parse(e,a),i=n instanceof k?n:new k(n,void 0);return this.renderTokens(s,i,o,e,r)};m.prototype.renderTokens=function(e,n,o,r,a){for(var s="",i,u,d,h=0,W=e.length;h<W;++h)d=void 0,i=e[h],u=i[0],u==="#"?d=this.renderSection(i,n,o,r,a):u==="^"?d=this.renderInverted(i,n,o,r,a):u===">"?d=this.renderPartial(i,n,o,a):u==="&"?d=this.unescapedValue(i,n):u==="name"?d=this.escapedValue(i,n,a):u==="text"&&(d=this.rawValue(i)),d!==void 0&&(s+=d);return s};m.prototype.renderSection=function(e,n,o,r,a){var s=this,i="",u=n.lookup(e[1]);function d(S){return s.render(S,n,o,a)}if(u){if(T(u))for(var h=0,W=u.length;h<W;++h)i+=this.renderTokens(e[4],n.push(u[h]),o,r,a);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")i+=this.renderTokens(e[4],n.push(u),o,r,a);else if($(u)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,r.slice(e[3],e[5]),d),u!=null&&(i+=u)}else i+=this.renderTokens(e[4],n,o,r,a);return i}};m.prototype.renderInverted=function(e,n,o,r,a){var s=n.lookup(e[1]);if(!s||T(s)&&s.length===0)return this.renderTokens(e[4],n,o,r,a)};m.prototype.indentPartial=function(e,n,o){for(var r=n.replace(/[^ \t]/g,""),a=e.split(`
`),s=0;s<a.length;s++)a[s].length&&(s>0||!o)&&(a[s]=r+a[s]);return a.join(`
`)};m.prototype.renderPartial=function(e,n,o,r){if(o){var a=this.getConfigTags(r),s=$(o)?o(e[1]):o[e[1]];if(s!=null){var i=e[6],u=e[5],d=e[4],h=s;u==0&&d&&(h=this.indentPartial(s,d,i));var W=this.parse(h,a);return this.renderTokens(W,n,o,h,r)}}};m.prototype.unescapedValue=function(e,n){var o=n.lookup(e[1]);if(o!=null)return o};m.prototype.escapedValue=function(e,n,o){var r=this.getConfigEscape(o)||A.escape,a=n.lookup(e[1]);if(a!=null)return typeof a=="number"&&r===A.escape?String(a):r(a)};m.prototype.rawValue=function(e){return e[1]};m.prototype.getConfigTags=function(e){return T(e)?e:e&&typeof e=="object"?e.tags:void 0};m.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!T(e))return e.escape};var A={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){I.templateCache=t},get templateCache(){return I.templateCache}},I=new m;A.clearCache=function(){return I.clearCache()};A.parse=function(e,n){return I.parse(e,n)};A.render=function(e,n,o,r){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+ge(e)+'" was given as the first argument for mustache#render(template, view, partials)');return I.render(e,n,o,r)};A.escape=Se;A.Scanner=j;A.Context=k;A.Writer=m;class ae{constructor(e,n){this.template=e,this.state=n,this.ast=A.parse(e)}getValue(){return this.value===void 0&&(this.value=A.render(this.template,this.state)),this.value}onChange(e){const n=[];for(const o of this.getUsedVariables().values())n.push(this.state.onVariableChange(o).subscribe(()=>{const r=A.render(this.template,this.state);r!==this.value&&(this.value=r,e(this.value))}));return{unsubscribe:()=>{for(const o of n)o.unsubscribe()}}}isPureString(){return this.ast.length===0||this.ast.length===1&&this.ast[0][0]==="text"}getUsedVariables(){const e=new Set;return this.recursiveGetUsedVariables(this.ast,e),e}recursiveGetUsedVariables(e,n){for(const o of e){const r=o[0],a=o[1],s=o[4];["name","&","#","^"].includes(r)&&n.add(a),s!==void 0&&typeof s!="string"&&this.recursiveGetUsedVariables(s,n)}}}async function xe(){var t;const e=await fe();for(const n of e){const o=(t=n.properties)!==null&&t!==void 0?t:[];for(const r of o){if(r.type==="int"||r.type==="bool"||r.type==="object"||typeof r.value!="string")continue;const a=new ae(r.value,WA.state);if(a.isPureString())continue;const s=a.getValue();await F(n.name,r.name,s),a.onChange(async i=>{await F(n.name,r.name,i)})}}}async function Be(){var t;const e=await G();for(const[n,o]of e.entries())if(o.type!=="objectgroup"){const r=(t=o.properties)!==null&&t!==void 0?t:[];for(const a of r){if(a.type==="int"||a.type==="bool"||a.type==="object"||typeof a.value!="string")continue;const s=new ae(a.value,WA.state);if(s.isPureString())continue;const i=s.getValue();J(n,a.name,i),s.onChange(u=>{J(n,a.name,u)})}}}async function F(t,e,n){console.log(t),(await WA.room.area.get(t)).setProperty(e,n)}function J(t,e,n){WA.room.setProperty(t,e,n),e==="visible"&&(n?WA.room.showLayer(t):WA.room.hideLayer(t))}let N,H=0,K=0;function Q(t){if(WA.state[t.name]){let e=t.properties.mustGetString("openLayer");for(const n of e.split(`
`))WA.room.showLayer(n);e=t.properties.mustGetString("closeLayer");for(const n of e.split(`
`))WA.room.hideLayer(n)}else{let e=t.properties.mustGetString("openLayer");for(const n of e.split(`
`))WA.room.hideLayer(n);e=t.properties.mustGetString("closeLayer");for(const n of e.split(`
`))WA.room.showLayer(n)}}function Re(t){const e=t.properties.getString("openSound"),n=t.properties.getNumber("soundRadius");let o=1;if(n){const r=ie(t.properties.mustGetString("openLayer").split(`
`));if(r>n)return;o=1-r/n}e&&WA.sound.loadSound(e).play({volume:o})}function Ie(t){const e=t.properties.getString("closeSound"),n=t.properties.getNumber("soundRadius");let o=1;if(n){const r=ie(t.properties.mustGetString("closeLayer").split(`
`));if(r>n)return;o=1-r/n}e&&WA.sound.loadSound(e).play({volume:o})}function se(t){return t.map(e=>N.get(e)).filter(e=>(e==null?void 0:e.type)==="tilelayer")}function ie(t){const e=se(t),n=re(e),o=((n.right-n.left)/2+n.left)*32,r=((n.bottom-n.top)/2+n.top)*32;return Math.sqrt(Math.pow(H-o,2)+Math.pow(K-r,2))}function Ge(t){WA.state.onVariableChange(t.name).subscribe(()=>{WA.state[t.name]?Re(t):Ie(t),Q(t)}),Q(t)}function je(t,e,n,o){const r=t.name;let a,s,i=!1;const u=n.getString("tag");let d=!0;u&&!WA.player.tags.includes(u)&&(d=!1);const h=!!u;function W(){var c;a&&a.remove(),a=WA.ui.displayActionMessage({message:(c=n.getString("closeTriggerMessage"))!==null&&c!==void 0?c:"Press SPACE to close the door",callback:()=>{WA.state[e.name]=!1,S()}})}function S(){var c;a&&a.remove(),a=WA.ui.displayActionMessage({message:(c=n.getString("openTriggerMessage"))!==null&&c!==void 0?c:"Press SPACE to open the door",callback:()=>{WA.state[e.name]=!0,W()}})}function z(c){const P=re(se(e.properties.mustGetString("closeLayer").split(`
`)));s=WA.room.website.create({name:"doorKeypad"+c,url:o+"/keypad.html#"+encodeURIComponent(c),position:{x:P.right*32,y:P.top*32,width:32*3,height:32*4},allowApi:!0})}function x(){s&&(WA.room.website.delete(s.name),s=void 0)}WA.room.onEnterLayer(r).subscribe(()=>{if(i=!0,n.getBoolean("autoOpen")&&d){WA.state[e.name]=!0;return}if(!WA.state[e.name]&&(h&&!d||!h)&&(n.getString("code")||n.getString("codeVariable"))){z(r);return}d&&(WA.state[e.name]?W():S())}),WA.room.onLeaveLayer(r).subscribe(()=>{i=!1,n.getBoolean("autoClose")&&(WA.state[e.name]=!1),a&&a.remove(),x()}),WA.state.onVariableChange(e.name).subscribe(()=>{i&&(!n.getBoolean("autoClose")&&WA.state[e.name]===!0&&W(),s&&WA.state[e.name]===!0&&x(),!n.getBoolean("autoOpen")&&WA.state[e.name]===!1&&S())})}function ze(t){const e=t.properties.mustGetString("bellSound"),n=t.properties.getNumber("soundRadius");let o=1;if(n){const r=Math.sqrt(Math.pow(t.x-H,2)+Math.pow(t.y-K,2));if(r>n)return;o=1-r/n}WA.sound.loadSound(e).play({volume:o})}function Ve(t){WA.state[t.name]===void 0&&(WA.state[t.name]=0),WA.state.onVariableChange(t.name).subscribe(()=>{WA.state[t.name]&&ze(t)})}function Oe(t,e,n){let o;const r=e.getString("bellPopup");WA.room.onEnterLayer(n).subscribe(()=>{var a;r?o=WA.ui.openPopup(r,"",[{label:(a=e.getString("bellButtonText"))!==null&&a!==void 0?a:"Ring",callback:()=>{WA.state[t]=WA.state[t]+1}}]):WA.state[t]=WA.state[t]+1}),WA.room.onLeaveLayer(n).subscribe(()=>{o&&(o.close(),o=void 0)})}async function Ue(t){t=t??q;const e=await le();N=await G();for(const n of e.values())n.properties.get("door")&&Ge(n),n.properties.get("bell")&&Ve(n);for(const n of N.values()){const o=new R(n.properties),r=o.getString("doorVariable");if(r&&n.type==="tilelayer"){const s=e.get(r);if(s===void 0)throw new Error('Cannot find variable "'+r+'" referred in the "doorVariable" property of layer "'+n.name+'"');je(n,s,o,t)}const a=o.getString("bellVariable");a&&Oe(a,o,n.name)}WA.player.onPlayerMove(n=>{H=n.x,K=n.y})}function De(t,e){const n=t.getString("bindVariable");if(n){const o=t.get("enterValue"),r=t.get("leaveValue"),a=t.getString("triggerMessage"),s=t.getString("tag");_e(n,e,o,r,a,s)}}function _e(t,e,n,o,r,a){a&&!WA.player.tags.includes(a)||(n!==void 0&&WA.room.onEnterLayer(e).subscribe(()=>{r||(WA.state[t]=n)}),o!==void 0&&WA.room.onLeaveLayer(e).subscribe(()=>{WA.state[t]=o}))}async function Ne(){const t=await G();for(const e of t.values()){const n=new R(e.properties);De(n,e.name)}}let ee;async function qe(t){const e=await WA.room.getTiledMap();t=t??q,ee=await G();const n=e.layers.find(o=>o.name==="configuration");if(n){const r=new R(n.properties).getString("tag");(!r||WA.player.tags.includes(r))&&WA.ui.registerMenuCommand("Configure the room",()=>{WA.nav.openCoWebSite(t+"/configuration.html",!0)});for(const a of ee.values()){const s=new R(a.properties),i=s.getString("openConfig");i&&a.type==="tilelayer"&&$e(i.split(","),a.name,s)}}}function $e(t,e,n){let o;const r=n.getString("openConfigAdminTag");let a=!0;r&&!WA.player.tags.includes(r)&&(a=!1);function s(){var u;o&&o.remove(),o=WA.ui.displayActionMessage({message:(u=n.getString("openConfigTriggerMessage"))!==null&&u!==void 0?u:"Press SPACE or touch here to configure",callback:()=>X(t)})}function i(){WA.nav.closeCoWebSite()}WA.room.onEnterLayer(e).subscribe(()=>{const u=n.getString("openConfigTrigger");a&&(u&&u==="onaction"?s():X(t))}),WA.room.onLeaveLayer(e).subscribe(()=>{o&&o.remove(),i()})}function He(){return WA.onInit().then(()=>{Ue().catch(t=>console.error(t)),Ne().catch(t=>console.error(t)),qe().catch(t=>console.error(t)),Be().catch(t=>console.error(t)),xe().catch(t=>console.error(t))}).catch(t=>console.error(t))}console.log("Script started successfully");let C,O,y,g,l=0,p=0;WA.onInit().then(()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags),WA.room.area.onEnter("sfire").subscribe(()=>{g=WA.sound.loadSound("sound/fire2.wav").play(f)}),WA.room.area.onLeave("sfire").subscribe(()=>{te()}),WA.room.area.onEnter("npcpiratezone").subscribe(()=>{C=WA.ui.openPopup("npcpiratepopup","CAPTAIN BOTTLE-TOP: Welcome aboard, matey! Our ship crashed on this planet, and we need to find all the fragments of the disk with pieces of the encryption key to restart the ship's systems and return home. Each fragment contains a part of the key necessary to start up systems like engines and fire-extinguishing system.",[]);var t=WA.sound.loadSound("sound/npc/pirate.wav");t.play(f)}),WA.room.area.onLeave("npcpiratezone").subscribe(M),WA.room.area.onEnter("npcrobotzone").subscribe(()=>{C=WA.ui.openPopup("npcrobotpopup","IRON SAMSON: Excellent! Did you complete the task? I don't know, and I don't care. Now, enter your answers into the terminal, and I'll see if you did the task right. Hope you remember how to use a keyboard, ha-ha-ha!",[]);var t=WA.sound.loadSound("sound/npc/robot.mp3");t.play(f)}),WA.room.area.onLeave("npcrobotzone").subscribe(M),WA.room.area.onEnter("npcadminzone").subscribe(()=>{C=WA.ui.openPopup("npcadmin1popup","BoJack: Did you notice the violation? Lets ban him?",[]),O=WA.ui.openPopup("npcadmin2popup","Zaragossa: I'll keep an eye on him from an ambush...",[]);var t=WA.sound.loadSound("sound/npc/horse.mp3");t.play(f);var e=WA.sound.loadSound("sound/npc/mouse.mp3");e.play(f)}),WA.room.area.onLeave("npcadminzone").subscribe(M),WA.room.area.onLeave("npcadminzone").subscribe(Ke),WA.room.area.onEnter("npcpidginzone").subscribe(()=>{C=WA.ui.openPopup("npcpidginpopup","FLIPPER: Hello! I find myself in a strange place surrounded by ancient Egyptian pyramids, and I feel that there are secrets hidden behind them that no one has yet uncovered. Can you help me find the answer to what lies behind these images?",[]);var t=WA.sound.loadSound("sound/npc/pidgin.mp3");t.play(f)}),WA.room.area.onLeave("npcpidginzone").subscribe(M),WA.room.area.onEnter("npcfrogzone").subscribe(()=>{C=WA.ui.openPopup("npcfrogpopup","FROG: Hey, help me out here! The horse and quokka are making me spin this wheel to generate energy for the server.",[]);var t=WA.sound.loadSound("sound/npc/frog.mp3");t.play(f)}),WA.room.area.onLeave("npcfrogzone").subscribe(M),WA.room.area.onEnter("npcpanda").subscribe(()=>{C=WA.ui.openPopup("npcpandapopup","Friend, don't ask me about Sei, better find me a bamboo.",[]);var t=WA.sound.loadSound("sound/npc/panda.mp3");t.play(f)}),WA.room.area.onLeave("npcpanda").subscribe(M),WA.room.area.onEnter("npcjay").subscribe(()=>{C=WA.ui.openPopup("npcjaypopup","TEXT",[]);var t=WA.sound.loadSound("sound/npc/meat.mp3");t.play(f)}),WA.room.area.onLeave("npcjay").subscribe(M),WA.room.area.onEnter("bubble").subscribe(()=>{var t=WA.sound.loadSound("sound/npc/bubble.mp3");t.play(f),WA.player.onPlayerMove(e=>{l=e.x,p=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{var e=WA.sound.loadSound("sound/scan.wav");e.play(f),console.log(l,p),WA.room.website.create({name:"bubblerweb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081947537352699914/bubblers.png?width=596&height=675",position:{x:l+100,y:p-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("bubble").subscribe(()=>{v(),WA.room.website.delete("bubblerweb")}),WA.room.area.onEnter("woodenstatue").subscribe(()=>{WA.player.onPlayerMove(t=>{l=t.x,p=t.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081981852493025300/woodenstatue.png?width=596&height=675",position:{x:l+100,y:p-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("woodenstatue").subscribe(()=>{v(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("shark").subscribe(()=>{WA.player.onPlayerMove(t=>{l=t.x,p=t.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081947537843425350/sandshark.png?width=596&height=675",position:{x:l+100,y:p-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("shark").subscribe(()=>{v(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("crystal").subscribe(()=>{WA.player.onPlayerMove(t=>{l=t.x,p=t.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081992872443789373/crystal.png?width=596&height=675",position:{x:l+100,y:p-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("crystal").subscribe(()=>{v(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("twistedtree").subscribe(()=>{WA.player.onPlayerMove(t=>{l=t.x,p=t.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1081995416826040361/tree.png?width=596&height=675",position:{x:l+100,y:p-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("twistedtree").subscribe(()=>{v(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("bushes").subscribe(()=>{WA.player.onPlayerMove(t=>{l=t.x,p=t.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1081590822379720724/1082000121409052763/bushes.png?width=596&height=675",position:{x:l+100,y:p-335,width:596,height:675},allowApi:!0})}})}),WA.room.area.onLeave("bushes").subscribe(()=>{v(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramidmain").subscribe(()=>{WA.player.onPlayerMove(t=>{l=t.x,p=t.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081654218450010243/e2b43b93f01f5797.png?width=911&height=676",position:{x:l+100,y:p-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramidmain").subscribe(()=>{v(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid1").subscribe(()=>{WA.player.onPlayerMove(t=>{l=t.x,p=t.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655031121592320/2.png?width=911&height=676",position:{x:l+100,y:p-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid1").subscribe(()=>{v(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid2").subscribe(()=>{WA.player.onPlayerMove(t=>{l=t.x,p=t.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655039891865660/3.png?width=911&height=676",position:{x:l+100,y:p-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid2").subscribe(()=>{v(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid3").subscribe(()=>{WA.player.onPlayerMove(t=>{l=t.x,p=t.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655077820965006/4.png?width=911&height=676",position:{x:l+100,y:p-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid3").subscribe(()=>{v(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("piramid4").subscribe(()=>{WA.player.onPlayerMove(t=>{l=t.x,p=t.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655106652614746/5.png?width=911&height=676",position:{x:l+100,y:p-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("piramid4").subscribe(()=>{v(),WA.room.website.delete("coWeb")}),WA.room.area.onEnter("bzzz").subscribe(()=>{var t=WA.sound.loadSound("sound/npc/bzzz.mp3");t.play(f),WA.player.onPlayerMove(e=>{l=e.x,p=e.y}),y=WA.ui.displayActionMessage({message:"Press the 'SPACE' to scan",callback:()=>{g=WA.sound.loadSound("sound/scan.wav").play(f),WA.room.website.create({name:"coWeb",url:"https://media.discordapp.net/attachments/1080545432163340309/1081655106652614746/5.png?width=911&height=676",position:{x:l+100,y:p-335,width:911,height:676},allowApi:!0})}})}),WA.room.area.onLeave("bzzz").subscribe(()=>{v(),WA.room.website.delete("coWeb"),te()}),He().then(()=>{console.log("Scripting API Extra ready")}).catch(t=>console.error(t))}).catch(t=>console.error(t));function M(){C!==void 0&&(C.close(),C=void 0)}function Ke(){O!==void 0&&(O.close(),O=void 0)}function v(){y!==void 0&&(y.remove(),y=void 0)}function te(){g!==void 0&&(WA.sound.loadSound(g).stop(),g=void 0)}var f={volume:.4,loop:!1,rate:1,detune:1,delay:0,seek:0,mute:!1};
